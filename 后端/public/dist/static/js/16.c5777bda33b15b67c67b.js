webpackJsonp([16],{sX5g:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),r=a.n(n),s=a("Xxa5"),o=a.n(s),l=a("exGp"),c=a.n(l),i=a("mvHQ"),u=a.n(i),p=a("7biW"),d=a("gyMJ"),m=(a("NYxO"),{data:function(){return{category:["图书、音像","家居生活","服饰、箱包","电子产品","美食宝典"],currentIndex:1,pageSize:5,tableData:[],tempData:[],search:[{span:6,key:"short_name",placeholder:"请输入商品名称",type:"input"},{span:6,key:"publisher",placeholder:"请输入发布者昵称",type:"input"}]}},components:{search:p.a},mounted:function(){this.getAllGoods()},methods:{handleEdit:function(e,t){console.log(e,t),window.localStorage.setItem("goodsInfo",u()(t)),this.$router.replace("/admin/adminupdate")},handleDelete:function(e,t){var a=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.$confirm("您确定永久删除该商品吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.q)(t.goods_id);case 2:200===e.sent.success_code&&(a.$message({type:"success",message:"已删除"}),a.getAllGoods());case 4:case"end":return e.stop()}},e,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})});case 1:case"end":return e.stop()}},e,a)}))()},handleCurrentChange:function(e){var t=this;this.currentIndex=e,this.tempData=[],this.tableData.forEach(function(e,a){a>=(t.currentIndex-1)*t.pageSize&&a<t.currentIndex*t.pageSize&&t.tempData.push(e)})},getAllGoods:function(){var e=this;return c()(o.a.mark(function t(){var a,n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tempData=[],a={},n=e.$refs.search,n.isSearch&&(a=r()(a,n.searchVal)),t.next=7,Object(d.t)(a);case 7:200===(s=t.sent).success_code&&(e.tableData=s.message,e.tableData.forEach(function(t,a){a>=(e.currentIndex-1)*e.pageSize&&a<e.currentIndex*e.pageSize&&e.tempData.push(t)}));case 9:case"end":return t.stop()}},t,e)}))()},restData:function(){this.currentIndex=1,this.pageSize=5,this.getAllGoods()}},computed:{pageNum:function(){return Math.ceil(this.tableData.length/this.pageSize)}},filters:{priceFormat:function(e){return e.toFixed(2)}}}),f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("search",{ref:"search",attrs:{search:e.search},on:{restData:e.restData,searchData:e.getAllGoods}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tempData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("span",[e._v(e._s(t.row.short_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品 ID"}},[a("span",[e._v(e._s(t.row.goods_id))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品分类"}},[a("span",[e._v(e._s(e.category[t.row.category-1]))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品价格"}},[a("span",[e._v(e._s(e._f("priceFormat")(t.row.price/100)))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品库存"}},[a("span",[e._v(e._s(t.row.counts))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品描述"}},[a("span",[e._v(e._s(t.row.goods_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品图片"}},[a("img",{staticStyle:{width:"70px"},attrs:{src:t.row.image_url}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品 ID",prop:"goods_id"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"short_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.image_url?a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.image_url,"preview-src-list":[t.row.image_url]}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布者",prop:"publisher"}}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间",prop:"createTime"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-count":e.pageNum},on:{"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var h=a("VU/8")(m,f,!1,function(e){a("u7UI")},"data-v-3a6ddef4",null);t.default=h.exports},u7UI:function(e,t){}});
//# sourceMappingURL=16.c5777bda33b15b67c67b.js.map