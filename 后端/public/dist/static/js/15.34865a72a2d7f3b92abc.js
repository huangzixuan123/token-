webpackJsonp([15],{Ct1t:function(e,t){},"bL/P":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),n=a("woOf"),c=a.n(n),u=a("exGp"),i=a.n(u),o=a("7biW"),l=a("1onU"),p=a("gyMJ"),h={data:function(){return{tableData:[],search:[{span:6,key:"user_nickname",placeholder:"请输入昵称",type:"input"},{span:6,key:"user_phone",placeholder:"请输入手机号",type:"input"},{span:6,key:"user_status",placeholder:"请选择状态",type:"select",options:[{value:-1,label:"全部"},{value:0,label:"未实名"},{value:1,label:"已实名"}]}],curPage:1,pageSize:10,totalData:0}},components:{search:o.a,pagination:l.a},activated:function(){this.getUsers()},methods:{getUsers:function(){var e=this;return i()(r.a.mark(function t(){var a,s,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={curPage:e.curPage,pageSize:e.pageSize},s=e.$refs.search,s.isSearch&&(a=c()(a,s.searchVal)),a.user_status&&-1===a.user_status&&delete a.user_status,t.next=7,Object(p.s)(a);case 7:200===(n=t.sent).success_code&&(n.message.map(function(e){e.user_status=1==e.user_status}),e.tableData=n.message,e.totalData=n.total);case 9:case"end":return t.stop()}},t,e)}))()},switchChange:function(e){var t=this,a={id:e.id,userStatus:e.user_status?1:0};Object(p.m)(a).then(function(e){200===e.success_code?t.$message({type:"success",message:"修改状态成功!"}):t.$message({type:"error",message:"修改状态失败!"}),t.getUsers()})},deleteUser:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(p.r)({id:e}).then(function(e){200===e.success_code?(t.$message({type:"success",message:"封禁(删除)成功!"}),t.getUsers()):t.$message({type:"error",message:"封禁(删除)失败!"})})}).catch(function(){})},restData:function(){this.curPage=1,this.pageSize=10,this.totalData=0,this.getUsers()},paginationChange:function(e){this.curPage=e.page,this.pageSize=e.limit,this.getUsers()}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"admin-users"}},[a("search",{ref:"search",attrs:{search:e.search},on:{restData:e.restData,searchData:e.getUsers}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_nickname",label:"昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_phone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{label:"上传凭证"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.user_voucher?a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.user_voucher,"preview-src-list":[t.row.user_voucher]}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"已实名","inactive-text":"未实名","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.switchChange(t.row)}},model:{value:t.row.user_status,callback:function(a){e.$set(t.row,"user_status",a)},expression:"scope.row.user_status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteUser(t.row.id)}}},[e._v("封禁(删除)")])]}}])})],1),e._v(" "),a("pagination",{attrs:{page:e.curPage,limit:e.pageSize,total:e.totalData},on:{pagination:e.paginationChange}})],1)},staticRenderFns:[]};var f=a("VU/8")(h,g,!1,function(e){a("Ct1t")},"data-v-3af614cb",null);t.default=f.exports}});
//# sourceMappingURL=15.34865a72a2d7f3b92abc.js.map