{"version":3,"sources":["webpack:///src/pages/Admin/Children/AdminUsers.vue","webpack:///./src/pages/Admin/Children/AdminUsers.vue?3764","webpack:///./src/pages/Admin/Children/AdminUsers.vue"],"names":["AdminUsers","data","tableData","search","span","key","placeholder","type","options","value","label","curPage","pageSize","totalData","components","components_search","pagination","Pagination","activated","this","getUsers","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","params","results","wrap","_context","prev","next","$refs","isSearch","assign_default","searchVal","user_status","Object","api","sent","success_code","message","map","item","total","stop","switchChange","_this2","id","userStatus","then","res","$message","deleteUser","_this3","$confirm","confirmButtonText","cancelButtonText","catch","restData","paginationChange","page","limit","Children_AdminUsers","render","_vm","_h","$createElement","_c","_self","attrs","ref","on","searchData","_v","staticStyle","width","prop","scopedSlots","_u","fn","scope","row","height","src","user_voucher","preview-src-list","_e","align","active-text","inactive-text","active-color","inactive-color","change","$event","model","callback","$$v","$set","expression","fixed","size","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.34865a72a2d7f3b92abc.js","sourcesContent":["<template>\r\n  <div id=\"admin-users\">\r\n    <!-- 筛选条件 -->\r\n    <search ref=\"search\" :search=\"search\" @restData=\"restData\" @searchData=\"getUsers\"/>\r\n    <el-table\r\n      :data=\"tableData\"\r\n      style=\"width: 100%\">\r\n      <el-table-column\r\n        prop=\"id\"\r\n        label=\"用户ID\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"user_name\"\r\n        label=\"账号\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"user_nickname\"\r\n        label=\"昵称\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"user_phone\"\r\n        label=\"手机号\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"上传凭证\">\r\n        <template slot-scope=\"scope\">\r\n          <el-image\r\n            v-if=\"scope.row.user_voucher\"\r\n            style=\"width: 100px; height: 100px\"\r\n            :src=\"scope.row.user_voucher\"\r\n            :preview-src-list=\"[scope.row.user_voucher]\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        align=\"center\"\r\n        label=\"状态\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch\r\n            v-model=\"scope.row.user_status\"\r\n            active-text=\"已实名\"\r\n            inactive-text=\"未实名\"\r\n            active-color=\"#13ce66\"\r\n            inactive-color=\"#ff4949\"\r\n            @change=\"switchChange(scope.row)\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        fixed=\"right\"\r\n        align=\"center\"\r\n        label=\"操作\"\r\n        width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" size=\"small\" @click=\"deleteUser(scope.row.id)\">封禁(删除)</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--分页-->\r\n    <pagination :page=\"curPage\" :limit=\"pageSize\" :total=\"totalData\" @pagination=\"paginationChange\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import search from '@/components/search'\r\n  import pagination from '@/components/Pagination/index'\r\n  import {getAllUsers, changeUserStatus, deleteUser} from '../../../api/index'\r\n  export default {\r\n    data() {\r\n      return {\r\n        tableData: [],\r\n        search: [{\r\n          span: 6, key: 'user_nickname', placeholder: '请输入昵称', type: 'input'\r\n        }, {\r\n          span: 6, key: 'user_phone', placeholder: '请输入手机号', type: 'input'\r\n        }, {\r\n          span: 6, key: 'user_status', placeholder: '请选择状态', type: 'select',\r\n          options: [{\r\n            value: -1,\r\n            label: '全部'\r\n          }, {\r\n            value: 0,\r\n            label: '未实名'\r\n          }, {\r\n            value: 1,\r\n            label: '已实名'\r\n          }]\r\n        }],\r\n        curPage: 1,\r\n        pageSize: 10,\r\n        totalData: 0\r\n      }\r\n    },\r\n    components: {\r\n      search,\r\n      pagination\r\n    },\r\n    activated(){\r\n      this.getUsers();\r\n    },\r\n    methods: {\r\n      async getUsers(){\r\n        let params = {\r\n          curPage: this.curPage,\r\n          pageSize: this.pageSize\r\n        }\r\n        // 判断是否点击了搜索\r\n        const search = this.$refs.search\r\n        const isSearch = search.isSearch\r\n        if (isSearch) {\r\n          params = Object.assign(params, search.searchVal)\r\n        }\r\n        if (params.user_status && params.user_status === -1) {\r\n          delete params.user_status\r\n        }\r\n        const results = await getAllUsers(params);\r\n        if(results.success_code === 200){\r\n          results.message.map(item => {\r\n            item.user_status = item.user_status == 1 ? true : false\r\n          })\r\n          this.tableData = results.message;\r\n          this.totalData = results.total\r\n        }\r\n      },\r\n      switchChange(item) { // 用户状态切换\r\n        const params = {\r\n          id: item.id,\r\n          userStatus: item.user_status ? 1 : 0\r\n        }\r\n        changeUserStatus(params).then(res => {\r\n          if (res.success_code === 200) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '修改状态成功!'\r\n            });\r\n            \r\n          } else {\r\n            this.$message({\r\n              type: 'error',\r\n              message: '修改状态失败!'\r\n            });\r\n          }\r\n          this.getUsers()\r\n        })\r\n      },\r\n      deleteUser(id) { // 封禁用户\r\n        this.$confirm('此操作将永久删除该用户, 是否继续?', '警告', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          deleteUser({id}).then(res => {\r\n            if (res.success_code === 200) {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '封禁(删除)成功!'\r\n              });\r\n              this.getUsers()\r\n            } else {\r\n              this.$message({\r\n                type: 'error',\r\n                message: '封禁(删除)失败!'\r\n              });\r\n            }\r\n          })\r\n        }).catch(() => {         \r\n        })\r\n      },\r\n      restData() { // 重置搜索\r\n        this.curPage = 1\r\n        this.pageSize = 10\r\n        this.totalData = 0\r\n        this.getUsers()\r\n      },\r\n      paginationChange(data) { // 分页改变\r\n        this.curPage = data.page\r\n        this.pageSize = data.limit\r\n        this.getUsers()\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Admin/Children/AdminUsers.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"admin-users\"}},[_c('search',{ref:\"search\",attrs:{\"search\":_vm.search},on:{\"restData\":_vm.restData,\"searchData\":_vm.getUsers}}),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"用户ID\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"user_name\",\"label\":\"账号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"user_nickname\",\"label\":\"昵称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"user_phone\",\"label\":\"手机号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"上传凭证\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.user_voucher)?_c('el-image',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\"},attrs:{\"src\":scope.row.user_voucher,\"preview-src-list\":[scope.row.user_voucher]}}):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-text\":\"已实名\",\"inactive-text\":\"未实名\",\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},on:{\"change\":function($event){return _vm.switchChange(scope.row)}},model:{value:(scope.row.user_status),callback:function ($$v) {_vm.$set(scope.row, \"user_status\", $$v)},expression:\"scope.row.user_status\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"align\":\"center\",\"label\":\"操作\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.deleteUser(scope.row.id)}}},[_vm._v(\"封禁(删除)\")])]}}])})],1),_vm._v(\" \"),_c('pagination',{attrs:{\"page\":_vm.curPage,\"limit\":_vm.pageSize,\"total\":_vm.totalData},on:{\"pagination\":_vm.paginationChange}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3af614cb\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Admin/Children/AdminUsers.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3af614cb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AdminUsers.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AdminUsers.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AdminUsers.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3af614cb\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AdminUsers.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3af614cb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Admin/Children/AdminUsers.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}