webpackJsonp([10],{GPMP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),i=a("exGp"),n=a.n(i),o=a("mvHQ"),l=a.n(o),c=a("woOf"),u=a.n(c),d=a("Dd8w"),p=a.n(d),_=a("NYxO"),f=a("gyMJ"),v={data:function(){return{orderList:[],order:{},type:"",curPage:1,pageSize:10,totalData:0,dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,textarea:""}},components:{pagination:a("1onU").a},computed:p()({},Object(_.c)(["userInfo"])),watch:{$route:function(){this.type=this.$route.query.type,this.getOrderList()}},mounted:function(){this.type=this.$route.query.type,this.getOrderList()},methods:{getOrderList:function(){var t=this;if(this.orderList=[],4!=this.type){var e={page:this.curPage,limit:this.pageSize,user_id:this.userInfo.id,type:this.type};12==this.type&&(e.publisher=this.userInfo.user_nickname),Object(f.C)(e).then(function(e){e.message.map(function(e){e.order_createTime=e.createTime,Object(f.y)({goodsNo:e.goods_id}).then(function(a){a.message[0].price=a.message[0].price/100,t.orderList.push(u()(e,a.message[0]))})}),t.totalData=e.total})}else{var a={page:this.curPage,limit:this.pageSize,appealer_id:this.userInfo.id};Object(f.u)(a).then(function(e){t.orderList=e.message,t.totalData=e.total})}},orderDetail:function(t){this.dialogVisible=!0,this.order=t},appeal:function(t){this.order=t,this.dialogVisible1=!0},handleEdit:function(t,e){window.localStorage.setItem("goodsInfo",l()(e)),this.$router.push("/me/adminupdate")},send:function(t){var e=this;this.$confirm("确认发货吗",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(f.i)({order_id:t.order_id,order_status:2}).then(function(t){200===t.success_code&&(e.$message.success("发货成功"),e.getOrderList())})}).catch(function(){})},handleDelete:function(t,e){var a=this;return n()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.$confirm("您确定永久删除该商品吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.q)(e.goods_id);case 2:200===t.sent.success_code&&(a.$message({type:"success",message:"已删除"}),location.reload());case 4:case"end":return t.stop()}},t,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})});case 1:case"end":return t.stop()}},t,a)}))()},appealConfirm:function(){var t=this;Object(f.i)({order_id:this.order.order_id,order_status:5,reason:this.textarea}).then(function(e){200===e.success_code&&(t.$message.success("申诉提交成功"),t.dialogVisible1=!1,t.textarea="",t.getOrderList())})},handleDetail:function(t){this.order=t,this.dialogVisible2=!0},cancel:function(t){var e=this;this.$confirm("确认取消申诉吗",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(f.e)({appeal_id:t.appeal_id,type:0}).then(function(t){200===t.success_code?(e.$message.success("取消申诉成功"),e.getOrderList()):e.$message.error("取消申诉失败")})}).catch(function(){})},deleteAppeal:function(t){var e=this;this.$confirm("确认删除申诉吗",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(f.e)({appeal_id:t.appeal_id,type:2}).then(function(t){200===t.success_code&&(e.$message.success("删除成功"),e.getOrderList())})}).catch(function(){})},deleteOrder:function(t,e){var a=this;this.$confirm("确认"+(e?"取消":"删除")+"该订单吗",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(f.i)({order_id:t.order_id,order_status:13}).then(function(t){200===t.success_code&&(a.$message.success((e?"取消":"删除")+"订单成功"),a.getOrderList())})}).catch(function(){})},receive:function(t){var e=this;this.$confirm("确认收货吗",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(f.i)({order_id:t.order_id,order_status:3}).then(function(t){200===t.success_code&&(e.$message.success("收货成功"),e.getOrderList())})}).catch(function(){})},paginationChange:function(t){this.curPage=t.page,this.pageSize=t.limit,this.getOrderList()},handleClose:function(t){t()}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"sales"}},[1==t.type||2==t.type||3==t.type?a("div",[a("el-table",{key:"table",staticStyle:{width:"100%"},attrs:{data:t.orderList}},[a("el-table-column",{attrs:{prop:"order_id",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"publisher",label:"卖方"}}),t._v(" "),a("el-table-column",{attrs:{prop:"short_name",label:"商品名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"order_createTime",label:"下单时间"}}),t._v(" "),3==t.type?a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(3==e.row.order_status?"已完成":4==e.row.order_status?"申诉成功":"申述失败")+"\n      ")]}}],null,!1,3749165366)}):t._e(),t._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.orderDetail(e.row)}}},[t._v("详情")]),t._v(" "),2==t.type?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.receive(e.row)}}},[t._v("收货")]):t._e(),t._v(" "),1==e.row.order_status||2==e.row.order_status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.deleteOrder(e.row,!0)}}},[t._v("取消")]):t._e(),t._v(" "),3==t.type&&4!=e.row.order_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.appeal(e.row)}}},[t._v(t._s(3==e.row.order_status?"申诉":"重新申述"))]):t._e(),t._v(" "),3==t.type?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteOrder(e.row)}}},[t._v("删除")]):t._e()]}}],null,!1,284759600)})],1)],1):4==t.type?a("div",[a("el-table",{key:"table1",staticStyle:{width:"100%"},attrs:{data:t.orderList}},[a("el-table-column",{attrs:{label:"申诉流水号",prop:"appeal_id"}}),t._v(" "),a("el-table-column",{attrs:{label:"订单号",prop:"order_id"}}),t._v(" "),a("el-table-column",{attrs:{label:"申诉时间",prop:"createTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"申诉状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0==e.row.appeal_status?"申诉中":1==e.row.appeal_status?"申诉通过":"申诉不通过")+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleDetail(e.row)}}},[t._v("详情")]),t._v(" "),0==e.row.appeal_status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.cancel(e.row)}}},[t._v("取消")]):t._e(),t._v(" "),0!=e.row.appeal_status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.deleteAppeal(e.row)}}},[t._v("删除")]):t._e()]}}])})],1)],1):11==t.type?a("div",[a("el-table",{key:"table11",staticStyle:{width:"100%"},attrs:{data:t.orderList}},[a("el-table-column",{attrs:{label:"商品 ID",prop:"goods_id"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"short_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.image_url?a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.image_url,"preview-src-list":[e.row.image_url]}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",prop:"createTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0===e.row.status?"上架中":"下架中")+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1):12==t.type?a("div",[a("el-table",{key:"table12",staticStyle:{width:"100%"},attrs:{data:t.orderList}},[a("el-table-column",{attrs:{label:"订单号",prop:"order_id"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品创建时间",prop:"createTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"买方",prop:"user_nickname"}}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1==e.row.order_status?"待发货":2==e.row.order_status?"待收货":3==e.row.order_status?"已完成":4==e.row.order_status?"对方申诉通过":5==e.row.order_status?"对方申述不通过":"对方申述中")+"\n          "),1==e.row.order_status?a("span",{staticStyle:{color:"#409eff",cursor:"pointer","margin-left":"5px"},on:{click:function(a){return t.send(e.row)}}},[t._v("发货")]):t._e()]}}])})],1)],1):t._e(),t._v(" "),a("pagination",{attrs:{page:t.curPage,limit:t.pageSize,total:t.totalData},on:{pagination:t.paginationChange}}),t._v(" "),a("el-dialog",{attrs:{title:"商品详情",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"item"},[a("span",[t._v("商品名称")]),t._v(" "),a("span",[t._v(t._s(t.order.short_name))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",[t._v("商品图片")]),t._v(" "),a("span",[a("img",{attrs:{width:"80",height:"80",src:t.order.image_url,alt:""}})])]),t._v(" "),a("div",{staticClass:"item"},[a("span",[t._v("价格")]),t._v(" "),a("span",[t._v(t._s(t.order.price))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",[t._v("卖家")]),t._v(" "),a("span",[t._v(t._s(t.order.publisher))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",[t._v("商品发布时间")]),t._v(" "),a("span",[t._v(t._s(t.order.createTime))])]),t._v(" "),a("div",{staticClass:"item"}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"申诉原因",visible:t.dialogVisible1,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入申诉原因"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.appealConfirm}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"申诉原因",visible:t.dialogVisible2,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("div",{staticClass:"item"},[t._v("\n      "+t._s(t.order.reason||"无填写原因")+"\n    ")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible2=!1}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(v,b,!1,function(t){a("YXs6")},"data-v-b50bc5ca",null);e.default=m.exports},YXs6:function(t,e){}});
//# sourceMappingURL=10.6f90fa8d190c0a703834.js.map